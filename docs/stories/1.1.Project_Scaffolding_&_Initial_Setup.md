# Story 1.1: Project Scaffolding & Initial Setup

## Status: Done

## Story
**As a developer,** I want a monorepo with a basic Next.js front-end and Nest.js back-end set up, **so that** I have a solid, scalable foundation to build the application on.

## Acceptance Criteria
1.  A Turborepo monorepo is initialized.
2.  A Next.js application is created within the monorepo (e.g., `apps/web`).
3.  A Nest.js application is created within the monorepo (e.g., `apps/api`).
4.  The Supabase client is integrated into both the front-end and back-end applications.
5.  A basic CI pipeline using GitHub Actions is configured to run linting and build checks for both apps.

## Tasks / Subtasks
- [x] **Task 1: Initialize Turborepo Monorepo (AC: 1)**
    - [x] Initialize an empty git repository.
    - [x] Use `npx create-turbo@latest` to set up the basic monorepo structure.
- [x] **Task 2: Create Frontend Application (AC: 2)**
    - [x] Inside the `apps` directory, create a new Next.js application named `web`.
    - [x] Ensure the Next.js app is configured with TypeScript.
    - [x] **Integrate MUI** according to the UI/UX specification.
- [x] **Task 3: Create Backend Application (AC: 3)**
    - [x] Inside the `apps` directory, create a new Nest.js application named `api`.
- [x] **Task 4: Integrate Supabase Client (AC: 4)**
    - [x] Add the `@supabase/supabase-js` dependency to both the `web` and `api` applications.
    - [x] Create a shared Supabase client configuration in a `packages/config` or similar shared location.
    - [x] Set up environment variables (`.env`) in both apps for Supabase URL and anon key.
- [x] **Task 5: Configure Basic CI Pipeline (AC: 5)**
    - [x] Create a `.github/workflows` directory at the root of the monorepo.
    - [x] Add a new workflow file (e.g., `ci.yml`).
    - [x] Configure the workflow to trigger on push/pull_request.
    - [x] Add jobs to install dependencies, run linting, and build both the `web` and `api` applications.

## Dev Notes
### Repository and Project Structure
*   **Structure:** Monorepo
*   **Tool:** Turborepo
*   **Project Structure:**
    ```
    alma-app-monorepo/
    ├── apps/
    │   ├── web/          # Next.js Frontend
    │   └── api/          # Nest.js Backend
    ├── packages/
    │   ├── ui/           # Shared MUI Components
    │   ├── types/        # Shared TypeScript Interfaces
    │   └── config/       # Shared Configurations
    └── package.json      # Root package for Turborepo
    ```
    *Source: `docs/architecture/unified-project-structure.md`*

### Tech Stack
*   **Frontend:** Next.js (~14.x), TypeScript (~5.x), **MUI (~5.x)**
*   **Backend:** Nest.js (~10.x), TypeScript (~5.x)
*   **Build Tool:** Turborepo (Latest)
*   **Authentication/DB:** Supabase
*   **CI/CD:** GitHub Actions
    *Source: `docs/architecture/tech-stack.md`*

### Testing
*   This initial story focuses on scaffolding. Testing requirements will be introduced in subsequent stories.

## Change Log
| Date | Version | Description | Author |
| --- | --- | --- | --- |
| 2024-08-09 | 1.0 | Initial Draft | Scrum Master |

## Dev Agent Record
### Agent Model Used
_TBD_

### Debug Log References
_TBD_

### Completion Notes List
- **Corrective Action (2025-08-11):** The initial implementation was incomplete. This story has now been fully completed by adding the Supabase dependencies, the shared `@repo/config` package, and the `.github/workflows/ci.yml` pipeline.
- Project scaffolded successfully.
- Manual intervention was required for Next.js setup.
- Supabase client is integrated and ready for use.
- Basic CI pipeline is in place.

### File List
- `package.json`
- `turbo.json`
- `apps/web/package.json`
- `apps/api/package.json`
- `packages/config/package.json`
- `packages/config/index.ts`
- `packages/config/supabase.ts`
- `.github/workflows/ci.yml`

## QA Results
_TBD_
